(function(t){function e(e){for(var n,a,u=e[0],i=e[1],s=e[2],d=0,p=[];d<u.length;d++)a=u[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);l&&l(e);while(p.length)p.shift()();return c.push.apply(c,s||[]),r()}function r(){for(var t,e=0;e<c.length;e++){for(var r=c[e],n=!0,a=1;a<r.length;a++){var i=r[a];0!==o[i]&&(n=!1)}n&&(c.splice(e--,1),t=u(u.s=r[0]))}return t}var n={},o={app:0},c=[];function a(t){return u.p+"js/"+({about:"about"}[t]||t)+"."+{about:"fb068f17"}[t]+".js"}function u(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.e=function(t){var e=[],r=o[t];if(0!==r)if(r)e.push(r[2]);else{var n=new Promise((function(e,n){r=o[t]=[e,n]}));e.push(r[2]=n);var c,i=document.createElement("script");i.charset="utf-8",i.timeout=120,u.nc&&i.setAttribute("nonce",u.nc),i.src=a(t);var s=new Error;c=function(e){i.onerror=i.onload=null,clearTimeout(d);var r=o[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),c=e&&e.target&&e.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+c+")",s.name="ChunkLoadError",s.type=n,s.request=c,r[1](s)}o[t]=void 0}};var d=setTimeout((function(){c({type:"timeout",target:i})}),12e4);i.onerror=i.onload=c,document.head.appendChild(i)}return Promise.all(e)},u.m=t,u.c=n,u.d=function(t,e,r){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)u.d(r,n,function(e){return t[e]}.bind(null,n));return r},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/",u.oe=function(t){throw console.error(t),t};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var d=0;d<i.length;d++)e(i[d]);var l=s;c.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},1223:function(t,e,r){},4760:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("0cdd");var n=r("2b0e"),o=r("5f5b"),c=r("b1e0");r("ab8b"),r("2dd8");n["default"].use(o["b"]);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}},[r("top-header")],1),r("router-view")],1)},u=[],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[r("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",[r("b-nav-item",{attrs:{to:"/"}},[t._v("Home")]),r("b-nav-item",{attrs:{to:"/login"}},[t._v("Me connecter")])],1),r("b-navbar-nav",{staticClass:"ml-auto"},[r("b-nav-item",[r("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-cart",modifiers:{"collapse-cart":!0}}],staticClass:"my-2 my-sm-0",attrs:{size:"sm"}},[t._v(t._s(t.cartItemCount)+" "),r("b-icon",{attrs:{icon:"cart4","aria-hidden":"true"}})],1)],1),r("b-nav-item",[r("b-dropdown",{staticClass:"my-2 my-sm-0",attrs:{id:"dropdown-1",size:"sm"},scopedSlots:t._u([{key:"button-content",fn:function(){return[r("b-icon",{attrs:{icon:"filter-square","aria-hidden":"true"}}),t._v(" Filtre ")]},proxy:!0}])},[r("b-dropdown-item",{on:{click:function(e){return t.fetchProductCategories()}}},[t._v("Par produit")]),r("b-dropdown-item",{on:{click:function(e){return t.fetchProducers()}}},[t._v("Par producteur")])],1)],1),r("b-nav-form",{on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[r("b-form-input",{staticClass:"mr-sm-2",attrs:{size:"sm",placeholder:"Search"},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),r("b-button",{staticClass:"my-2 my-sm-0",attrs:{size:"sm",type:"submit"}},[r("b-icon",{attrs:{icon:"search","aria-hidden":"true"}})],1)],1)],1)],1)],1)},s=[],d=(r("96cf"),r("1da1")),l={computed:{cartItemCount:function(){return this.$store.getters.cartItemCount}},methods:{search:function(){this.$store.dispatch("search",{text:this.searchText})},fetchProductCategories:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("fetchProductCategories");case 2:case"end":return e.stop()}}),e)})))()},fetchProducers:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("fetchProducers");case 2:case"end":return e.stop()}}),e)})))()}},data:function(){return{searchText:""}}},p=l,f=(r("7e29"),r("2877")),m=Object(f["a"])(p,i,s,!1,null,"233e43b6",null),b=m.exports,h={components:{"top-header":b}},g=h,v=(r("5c0b"),Object(f["a"])(g,a,u,!1,null,null,null)),_=v.exports,C=r("9483");Object(C["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});r("d3b7");var y=r("8c4f"),O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("b-row",[r("b-col",{staticClass:"col-md-1 col-sm-1 col-xs-1"},[r("div",[t.products?r("b-button",{staticClass:"my-2 my-sm-0",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(e){return t.fetchProductCategories()}}},[t._v(" Retour "),r("b-icon",{attrs:{icon:"box-arrow-in-left","aria-hidden":"true"}})],1):t._e()],1)]),r("b-col",{staticClass:"col-md-11 col-sm-1 col-xs-1"})],1),r("br"),r("b-row",[r("b-col",{staticClass:"col-md-9 col-sm-9 col-xs-9"},[t.producers?r("b-card-group",{attrs:{deck:""}},t._l(t.producers,(function(t){return r("producer-card",{key:t.id,attrs:{name:t.companyName}})})),1):t._e(),t.productCategories?r("b-card-group",{attrs:{deck:""}},t._l(t.productCategories,(function(e){return r("product-category-card",{key:e.id,attrs:{productCategory:e},nativeOn:{click:function(r){return t.fetchProducts(e.id)}}})})),1):t._e(),t.products?r("b-card-group",{attrs:{deck:""}},t._l(t.products,(function(t){return r("product-card",{key:t.id,attrs:{product:t}})})),1):t._e()],1),r("b-col",{staticClass:"col-md-3 col-sm-3 col-xs-3"},[r("cart-sidebar")],1)],1)],1)},T=[],w=r("5530"),P=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{on:{mouseover:function(e){return t.mouseOver()},mouseleave:function(e){return t.mouseLeave()}}},[r("b-card",{staticClass:"mb-2",staticStyle:{"max-width":"10rem"},attrs:{"no-body":"","img-src":"img/"+t.productCategory.description,"img-alt":"productCategory","img-top":"",tag:"article",footer:t.productCategory.name,"bg-variant":t.bgVariant}})],1)},R=[],E={props:["productCategory"],data:function(){return{bgVariant:"light"}},methods:{mouseOver:function(){this.bgVariant="primary"},mouseLeave:function(){this.bgVariant="light"}}},x=E,S=(r("f7a2"),Object(f["a"])(x,P,R,!1,null,"5ace06a0",null)),k=S.exports,j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-card",{staticClass:"mb-2",staticStyle:{"max-width":"10rem"},attrs:{"no-body":"","img-src":"https://picsum.photos/600/300/?image=25","img-alt":"product","img-top":"",tag:"article",footer:t.name}})],1)},D=[],A={props:["name"]},I=A,U=Object(f["a"])(I,j,D,!1,null,"71903795",null),$=U.exports,q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-card",{staticStyle:{"max-width":"12rem"},attrs:{title:t.product.name,"img-src":"img/"+t.product.label,"img-alt":"img-info","img-top":"",tag:"article"}},[r("b-card-body",[r("b-card-text",[t._v(" Prix: "+t._s(t.product.price)+" Stock: "+t._s(t.product.stock)+" ")]),r("b-button",{attrs:{size:"sm"},on:{click:function(e){return t.addToCart()}}},[r("b-icon",{attrs:{icon:"plus","aria-hidden":"true"}})],1)],1)],1)],1)},M=[],F=r("2f62"),L={props:["product"],data:function(){return{count:0}},methods:{addToCart:function(){this.$store.dispatch("addProductToCart",{product:this.product,quantity:1})}},computed:Object(w["a"])({},Object(F["b"])(["addProductToCart"]))},N=L,z=(r("582f"),Object(f["a"])(N,q,M,!1,null,"96b6c5a2",null)),V=z.exports,G=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-collapse",{attrs:{id:"collapse-cart"}},[r("b-card",{scopedSlots:t._u([{key:"footer",fn:function(){return[t._v(" Total : €"+t._s(t.cartTotalPrice)+" "),r("b-button",{attrs:{size:"sm"},on:{click:function(e){return e.preventDefault(),t.clearCartItems()}}},[t._v("Vider")])]},proxy:!0}])},t._l(t.cart,(function(e){return r("b-card-body",{key:e.id,staticStyle:{"max-height":"80px"}},[r("span",[t._v(" "+t._s(e.product.name)+" "),r("b-button",{attrs:{size:"sm"},on:{click:function(r){return r.preventDefault(),t.removeProductFromCart(e.product)}}},[r("b-icon",{attrs:{icon:"trash","aria-hidden":"true"}})],1)],1),r("br"),t._v(" "+t._s(e.quantity)+" X "+t._s(e.product.price)+"€ "),r("hr")])})),1)],1)],1)},H=[],B={computed:{cart:function(){return this.$store.state.cart},cartTotalPrice:function(){return this.$store.getters.cartTotalPrice}},methods:{removeProductFromCart:function(t){this.$store.dispatch("removeProductFromCart",t)},clearCartItems:function(){this.$store.dispatch("clearCartItems")}}},J=B,X=Object(f["a"])(J,G,H,!1,null,"2ba8ccaf",null),K=X.exports,Q={name:"Home",components:{"product-category-card":k,"producer-card":$,"product-card":V,"cart-sidebar":K},computed:Object(w["a"])(Object(w["a"])(Object(w["a"])({},Object(F["b"])(["productCategories"])),Object(F["b"])(["products"])),Object(F["b"])(["producers"])),mounted:function(){this.fetchProductCategories()},methods:{fetchProducts:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$store.dispatch("fetchProducts",{categoryId:t});case 2:case"end":return r.stop()}}),r)})))()},fetchProductCategories:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("fetchProductCategories");case 2:case"end":return e.stop()}}),e)})))()}}},W=Q,Y=(r("c8ab"),Object(f["a"])(W,O,T,!1,null,"dc8f1d6a",null)),Z=Y.exports;n["default"].use(y["a"]);var tt=[{path:"/",name:"Home",component:Z},{path:"/login",name:"Login",component:function(){return r.e("about").then(r.bind(null,"a55b"))}}],et=new y["a"]({mode:"history",base:"/",routes:tt}),rt=et,nt=(r("4de4"),r("7db0"),r("4160"),r("159b"),r("bc3a")),ot=r.n(nt);ot.a.defaults.baseURL="https://webshopbepi-app.herokuapp.com/",n["default"].use(F["a"]);var ct=new F["a"].Store({state:{productCategories:[],producers:[],products:[],cart:[]},mutations:{SET_PRODUCT_CATEGORIES:function(t,e){t.productCategories=e},SET_PRODUCERS:function(t,e){t.producers=e},SET_PRODUCTS:function(t,e){t.products=e},ADD_TO_CART:function(t,e){var r=e.product,n=e.quantity,o=t.cart.find((function(t){return t.product.id==r.id}));o?o.quantity+=n:t.cart.push({product:r,quantity:n})},REMOVE_PRODUCT_FROM_CART:function(t,e){t.cart=t.cart.filter((function(t){return t.product.id!==e.id}))},CLEAR_CART_ITEMS:function(t){t.cart=[]}},actions:{fetchProductCategories:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,console.log(Object({NODE_ENV:"production",BASE_URL:"/"}).API_ENDPOINT),r.next=4,ot.a.get("/product-categories").then((function(t){return e.productCategories=t.data}));case 4:o=r.sent,n("SET_PRODUCT_CATEGORIES",o),n("SET_PRODUCTS",null),n("SET_PRODUCERS",null);case 8:case"end":return r.stop()}}),r)})))()},search:function(t,e){var r=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var o,c,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=t.commit,c=e.text,n.next=4,ot.a.get("/products/name/"+c).then((function(t){return r.products=t.data}));case 4:a=n.sent,o("SET_PRODUCTS",a),o("SET_PRODUCT_CATEGORIES",null),o("SET_PRODUCERS",null);case 8:case"end":return n.stop()}}),n)})))()},fetchProducts:function(t,e){var r=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var o,c,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=t.commit,c=e.categoryId,n.next=4,ot.a.get("/products/category/"+c).then((function(t){return r.products=t.data}));case 4:a=n.sent,o("SET_PRODUCTS",a),o("SET_PRODUCT_CATEGORIES",null),o("SET_PRODUCERS",null);case 8:case"end":return n.stop()}}),n)})))()},fetchProducers:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,r.next=3,ot.a.get("/producers").then((function(t){return e.producers=t.data}));case 3:o=r.sent,n("SET_PRODUCERS",o),n("SET_PRODUCTS",null),n("SET_PRODUCT_CATEGORIES",null);case 7:case"end":return r.stop()}}),r)})))()},addProductToCart:function(t,e){var r=t.commit,n=e.product,o=e.quantity;r("ADD_TO_CART",{product:n,quantity:o})},removeProductFromCart:function(t,e){var r=t.commit;r("REMOVE_PRODUCT_FROM_CART",e)},clearCartItems:function(t){var e=t.commit;e("CLEAR_CART_ITEMS")}},getters:{productCategories:function(t){return t.productCategories},producers:function(t){return t.producers},products:function(t){return t.products},cartItemCount:function(t){var e=0;return t.cart.forEach((function(t){e+=t.quantity})),e},cartTotalPrice:function(t){var e=0;return t.cart.forEach((function(t){e+=t.product.price*t.quantity})),e}},modules:{}});n["default"].config.productionTip=!1,n["default"].use(o["a"]),n["default"].use(c["a"]),new n["default"]({router:rt,store:ct,render:function(t){return t(_)}}).$mount("#app")},"582f":function(t,e,r){"use strict";r("1223")},"5c0b":function(t,e,r){"use strict";r("9c0c")},"7e29":function(t,e,r){"use strict";r("4760")},"8e57":function(t,e,r){},"9c0c":function(t,e,r){},c8ab:function(t,e,r){"use strict";r("8e57")},e7c8:function(t,e,r){},f7a2:function(t,e,r){"use strict";r("e7c8")}});
//# sourceMappingURL=app.54e143e8.js.map